# 쿠키
  - 서버가 어떤 데이터를 브라우저 측에 저장한 후 다시 그데이터를 받아 오는 기술 또는 그 데이터 자체
  - 클라이언트에 총 300개의 쿠키가 저장 가능함
  - 하나의 도메인당 20개의 쿠키를 가질 수 있음
  - 하나의 쿠키는 4KB까지 저장 가능

## 쿠키의 구성 요소
  - 이름 : 각각의 쿠키를 구별하는 데 사용되는 이름
  - 값 : 쿠키의 이름과 관련된 값
  - 유효기간 : 쿠키의 유지시간
  - 도메인 : 쿠키를 전송할 도메인
  - 경로 : 쿠키를 전송할 요청 경로

## 쿠키 사용 방법
  - Response Header에 Set-Cookie 속성을 사용하여 클라이언트에 쿠키를 만들 수 있음
  - 이름, 값
  ```
    Set-Cookie: <쿠키 이름>=<쿠키 값>;
  ```
  - 유효기간
  ```
    Set-Cookie: <쿠키 이름>=<쿠키 값>; Expires=종료 시점
    Set-Cookie: <쿠키 이름>=<쿠키 값>; Max-Age=유효 기간
  ```
  ```
  /* 참고로 브라우저에 저장해두었던 쿠키를 즉시 만료하고 싶을 때는 다음과 같이 MAX-Age 속성을 0으로 하면 됨 */
  Set-Cookie: a=1; Max-Age=0
  ```
  - 도메인
  ```
    Set-Cookie: <쿠키 이름>=<쿠키 값>; Domain=도메인
  ```
  - 경로
  ```
    Set-Cookie: <쿠키 이름>=<쿠키 값>; Path=경로
  ```

## 쿠키의 동작 순서
  1. 클라이언트가 페이지를 요청
  2. 서버에서 쿠키를 생성
  3. HTTP 헤더에 쿠키를 포함 시켜 응답
  4. 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관하고 있음
  5. 넘겨 받은 쿠키는 클라이언트가 가지고 있다가 다시 서버에 요청할 때 요청과 함께 쿠키를 전송
  6. 동일 사이트 재방문시 클라이언트의 PC에 해당 쿠키가 있는 경우, 요청 페이지와 함께 쿠키를 전송한다.

## 쿠키 사용 예시
  - 아이디, 비밀번호 저장
  - 팝업에서 오늘 더 이상 이창을 보지 않음 체크
  - 장바구니

## 쿠키의 한계
  - 유실
    - 대부분 브라우저는 환경 설정에서 쿠키 일괄 삭제 기능을 제공함
    - 즉, 유실되면 안 되는 중요한 데이터는 쿠키를 사용해서 브라우저에 저장해서는 안됨
  - 변조
    - 브라우저의 개발자 도구를 사용하면 현재 어떤 쿠키가 저장되어 있는지 한 눈에 파악할 수 있어 손쉽게 변경가능 함
    - 이를 통해 서버가 브라우저로 보낸 쿠키와 전혀 다른 쿠키를 서버에 돌려 보낼 수 도 있으며, 심지어 서버가 저장한 적이 없는 새로운 쿠키를 만들어서 서버에 보낼 수도 있음
    - 즉, 서버에서는 브라우저로 부터 수신한 쿠키 데이터가 유효한지 검증할 필요가 있음
  - 도난
    - 클라이언트에 저장되기 때문에 쿠키가 탈취되는 것을 서버 입장에서 막을 도리가 없음
  
## 쿠키 사용 이유
  - HTTP 프로토콜의 connectionless와 stateless한 특성 때문에 사용됨
    - 즉, 서버가 클라이언트의 요청에 응답을 하는 순간 HTTP 연결이 끊어지며 클라이언트에서 새로운 요청을 해야 다시 연결이 맺어짐
    - 또한 로그인 정보와 같이 유지 되어야 하는 정보 또한 각 페이지 별로 계속 요청을 해야함
  - 하지만 쿠키는 서버가 브라우저에 한 번 저장하면 브라우저는 해당 쿠키를 매 요청마다 계속해서 서버로 돌려 보내기 때문에 어느 브라우저로 부터 요청이 오는 것인지 어렵지 않게 판단 가능함
    
## 쿠키의 종류
  - 퍼스트 파티 쿠키(First-Party-Cookie)
    - 클라이언트가 직접 방문한 웹사이트에서 직접 발행하는 쿠키
  - 서드 파티 쿠키(Third-Party-Cookie)
    - 클라이언트가 방문한 웹사이트가 아닌, 다른 웹사이트에서 발행한 쿠키
    - 각기 다른 도메인으로 이루어진 사이트의 사용내역에 대한 정보를 쿠키로부터 가져와 활용할 수 있기 때문에 사용자의 온라인상 행동을 추적 및 데이터를 분석하여 광고 등에 사용 가능
    - 개인 정보 보호를 침해할 수 있음
